
wget https://downloads.apache.org/hive/hive-3.1.2/apache-hive-3.1.2-bin.tar.gz

tar xzf apache-hive-3.1.2-bin.tar.gz

sudo nano .bashrc

export HIVE_HOME= "home/hdoop/apache-hive-3.1.2-bin"
export PATH=$PATH:$HIVE_HOME/bin

source ~/.bashrc

sudo nano $HIVE_HOME/bin/hive-config.sh

export HADOOP_HOME=/home/hdoop/hadoop-3.2.1


hdfs dfs -mkdir /tmp

hdfs dfs -chmod g+w /tmp

hdfs dfs -ls /



hdfs dfs -mkdir -p /user/hive/warehouse


hdfs dfs -chmod g+w /user/hive/warehouse


hdfs dfs -ls /user/hive


cd $HIVE_HOME/conf


cp hive-default.xml.template hive-site.xml


sudo nano hive-site.xml


<property>
	<name>hive.metastore.warehouse.dir</name>
	<value>/user/hive/warehouse</value>
</property>

$HIVE_HOME/bin/schematool -dbType derby -initSchema

The process can take a few moments to complete.

The schematool command has initiated the Derby database.
Derby is the default metadata store for Hive. If you plan to use a different database solution, such as MySQL or PostgreSQL, you can specify a database type in the hive-site.xml file.

How to Fix guava Incompatibility Error in Hive
If the Derby database does not successfully initiate,  you might receive an error with the following content:

“Exception in thread “main” java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLjava/lang/String;Ljava/lang/Object;)V”

This error indicates that there is most likely an incompatibility issue between Hadoop and Hive guava versions.

Locate the guava jar file in the Hive lib directory:

ls $HIVE_HOME/lib

Location of Hive guava jar file.
Locate the guava jar file in the Hadoop lib directory as well:

ls $HADOOP_HOME/share/hadoop/hdfs/lib

Location of Hadoop guava jar file.
The two listed versions are not compatible and are causing the error. Remove the existing guava file from the Hive lib directory:

rm $HIVE_HOME/lib/guava-19.0.jar

Copy the guava file from the Hadoop lib directory to the Hive lib directory:

cp $HADOOP_HOME/share/hadoop/hdfs/lib/guava-27.0-jre.jar $HIVE_HOME/lib/

Use the schematool command once again to initiate the Derby database:

$HIVE_HOME/bin/schematool -dbType derby -initSchema

Launch Hive Client Shell on Ubuntu
Start the Hive command-line interface using the following commands:

cd $HIVE_HOME/bin

hive


Hive Installation:

https://phoenixnap.com/kb/install-hive-on-ubuntu

Error References:

https://sparkbyexamples.com/apache-hive/hive-hiveexception-runtimeexception-unable-to-instantiate-sessionhivemetastoreclient/

https://stackoverflow.com/questions/68414746/what-ist-the-reason-for-the-error-message-error-function-nucleus-ascii-alrea

https://stackoverflow.com/questions/35449274/java-lang-runtimeexception-unable-to-instantiate-org-apache-hadoop-hive-ql-meta

